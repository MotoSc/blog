---
layout: post
title: "读书笔记《代码之髓：编程语言核心概念》 第三章"
date: 2016-07-08 19:19:40 +0800
categories:
---
# 第三章 语法的诞生

*语法就是程序语言设计者规定的解释程序编写方式的一系列规则。*

- 运算符优先级，1+2*3，早期有计算器计算结果为9，也就是(1+2)*3的执行顺序。而现在大家使用的程序设计语言大多数的计算结果都应该是其。这因为程序设计者制定了乘法优先级高于加法优先级这一规则。因为这和四则运算的法则是一样的。
- 运算顺序，对于9/3/3，是9/(3/3)还是(9/3)/3。大部分语言都是(9/3)/3来计算的。这是因为程序设计者制定了这样的规则：在做结合运算符号除号出现并列的情况下，运算从左开始计算。

### 语法是语言设计者指定的规则

语言设计者制定的规则就是语法。语法因语言而异。运算符的存在类型也因语言而异。比如C语言的赋值符号`=`是运算符。但它与普通的加减乘除运算符不同，是又结合运算符。所以代码中X = Y = 1这样的语句，被解释为X = (Y = 1)。不同的是，Python语言的赋值符`=`不是运算符的而是一种句式，在运算式中不能出现。

### 栈机器和FORTH语言

FORTH语言是一种几乎没有语法的语言，其设计者Charles H.Moore说FORTH是最简单的计算机语言。他认为*世上所有的程序设计语言都具备一定的可读性，但初次接触某种语言的人常常感到困惑，这是由于他们的语法往往晦涩难懂且变化多端。*而FORTH语言将语法控制到最少的程度缓和了这一问题。

可以点击这个[链接](http://nhiro.org/learn_language/FORTH-on-browser.html)试一下和平时其他语言有什么不同的地方。

计算的流程  1 2 +  =>  1 + 3    1 2 + 3 * => (1 + 2) * 3。执行过程FORTH语言使用了被称为栈的数值预存空间。如(1 2 +)，由于先遇到数值1，于是栈中放1。然后遇到数值2，再次将2存进栈。最后遇到+号。这个符号被定义的功能室，从栈中去除前面两个数值，再把其想加的结果存入栈。于是，从栈中把1和2取出来，加法运算后的结果3被放入栈中。

### 语法树和LISP语言

FORTH语言不需要使用括号或者优先次序就可以表达算顺序。现实中，有的语言总是需要用括号标示完整的意思单元，如1958年的LISP语言,1加2用代码标示为：

{% highlight lisp %}
(+ 1 2) //首先是括号，接着是加号命令，用空格分割后，跟上进行相加运算额对象。
{% endhighlight %}

计算的流程 (* (+ 1 2) 3) => (1 + 2) * 3
- 1.先做 1与2相加，得到式子A
- 2.将式子A与3相乘
- 3.把A等于1与2的和这个式子带入到过程2中。这样的过程称作为语法树。（式子A就是？）
![语法树的结构](http://objc.co/images/2016-07-08/06.d03z.002.png)

### FORTH和LISP的语法树

两者的语法树相同，只是在这个相同的语法树上，按照不同的规则进行遍历，人虽然代码不同，但是所用的树结构相同。

### 中缀表达式

在FORTH语言中，我们用`1 2 +`来表达1加2，运算符放在运算对象的后面。在LISP语言中，1加2表达为`+ 1 2`,运算符放在对象的前面。而数学表达式中用`1 + 2`来表达，运算符放在运算对象的中间。像这样把运算符放在运算对象之后、之前和之中分别称为：
- 前缀表达式
- 后缀表达式
- 中缀表达式

`前缀表达式`和`后缀表达式`也被称为波兰表示法和逆波兰表示法，得名与最早研究他们的波兰人。`前缀表达式`中的括号并不必须，只是可以在一定场景中避免误解。三种表达式只是表达方法上的约束事项而已。在出现程序设计语言之前，人们尽习惯于使用中缀表达式来书写数学表达式。

### 语法解析器
语法解析器是把源码作为字符串读入、解析，并建立语法树的过程。

>小结
>同样语言处理相同的运算，表达式的样子可能大相径庭。但是基本都可以用语法树表示。语言之间的差异就是语法的差异，语法的差异决定了怎么样的代码对应着怎么样的语法树。
